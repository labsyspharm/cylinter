# Directory structure

Upon the full completion of a pipeline run, the directory structure will be as follows:

```
exemplar-002
├── markers.csv
├── raw
├── illumination
├── registration
├── dearray
│   └── masks
├── probability-maps
│   ├── ilastik
│   └── unmicst
├── segmentation
├── quantification
├── cell-states
└── qc
```

A few important things to highlight:

* The name of the parent directory (e.g., `exemplar-002`) is assumed by the pipeline to be the sample name.
* The file `markers.csv` containing metadata about markers must be placed in the parent directory.
* Raw images must be placed inside the `raw/` subdirectory.
* Subdirectories `illumination/` through `cell-states/` have direct correspondence to the pipeline steps.
  * For specimens that are not TMA (like exemplar-001), there will be no `dearray/` subdirectory, since there is no TMA dearraying step. Probability maps will be generated directly from files in the `registration/` directory.
  * If there are multiple modules for a given pipeline step (e.g., `probability-maps`), their results will be subdivided into additional subdirectories.
* Additional QC files generated by each step of the pipeline will be written to `qc/`.
* The pipeline can be started from any step (see below), in which case it will look for the output of the immediately preceding step in the corresponding directory. All directories preceeding *that* step can therefore be omitted. This includes the `raw/` directory.
  * For example, running the pipeline with `--tma --start-at probability-maps` will start the pipeline at the probability map computation. Since we specified that the specimen is a TMA, the pipeline will look for images in the `dearray/` directory. Thus, directories `raw/`, `illumination/` and `registration/` are not used by the pipeline and can be exluded from the parent project directory.
